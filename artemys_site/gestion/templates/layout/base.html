<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {# Load the tag library #}
    {% load bootstrap5 %}

    {# Load CSS and JavaScript #}
    {% bootstrap_css %}
    {% bootstrap_javascript %}

    {% load static %}

    {% block extra_css %} {% endblock extra_css%}

    <link rel="stylesheet" href="{% static 'css/style.css' %} ">
    <link rel="shortcut icon" href="{% static 'img/logoPequeÃ±o.png' %}" type="image/x-icon">

    <title>{% block title %}Artemys{% endblock %}</title>
  </head>

  <body>
    {% include "_partials/header.html" with id_btn_modal="updateDetails" idModal="favDialog" only %}

    <main class="d-flex flex-column bg-body w-100">
      {% block main_content %}{% endblock main_content %}
    </main>
    
    {% include "_partials/footer.html" %}
    
    <script type="text/javascript">
      const $navBar = document.getElementById('navbarHeader')
      
      const sizeBreakPoint = () => {
        if (window.innerWidth >= 992 && $navBar.classList.contains('bg-secondary')) {
          $navBar.classList.remove('bg-secondary', 'bg-gradient')
        }
    
        if (window.innerWidth < 992 && !$navBar.classList.contains('bg-secondary')) {
          $navBar.classList.add('bg-secondary', 'bg-gradient')
        }
      }

      const toasterShow = () => {
        const toasters = document.querySelectorAll(".toaster.show")
        toasters.forEach(el => setTimeout(() => el.remove(), 5000))
      }

      const modalShow = () => {
        const updateButton = document.getElementById("updateDetails");
        const favDialog = document.getElementById("favDialog");
  
        updateButton.addEventListener("click", () => favDialog.showModal());

        favDialog.addEventListener("click", ev => {
          if (ev.target === favDialog)
            favDialog.close()
        })
      }
    
      document.addEventListener('DOMContentLoaded', () => {
        sizeBreakPoint();
        toasterShow();
        modalShow();
      })
    
      window.addEventListener('resize', sizeBreakPoint)

      {% block extra_js %}{% endblock extra_js %}
    </script>
  </body>
</html>
